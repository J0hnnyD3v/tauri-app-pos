<section class="login-container flex justify-content-center align-items-center">
  @if (isRequesting()) {
    <section class="loading-container">
      <p-progressSpinner aria-label="Cargando ..."></p-progressSpinner>
      <section
        style="position:relative; top: 0px; left: -82px; font-size: 12px; font-weight: 600; color: --primary-color;"
      >
        Cargando ...
      </section>
    </section>
  }
  <p-card header="Inicio de Sesión" subheader="Escribir usuario y contraseña" [style]="{ width: '400px' }">
    <ng-template pTemplate="header">
      <section class="text-center">
        <img alt="Noah Pos" height="180" src="assets/shop.png" />
      </section>
    </ng-template>

    <form (ngSubmit)="onSubmit()" [formGroup]="fg" class="flex flex-column">
      <section class="mt-3">
        <span class="p-float-label p-input-icon-right w-full">
          <i class="pi pi-envelope"></i>
          <input type="text" pInputText formControlName="username" class="w-full"/>
          <label for="username">Usuario</label>
        </span>
        @if (invalidUsername()) {
          <small class="p-error block">
            e-mail inválido.
          </small>
        }
        @if (requiredUsername()) {
          <small class="p-error block">
            *Requerido.
          </small>
        }
      </section>
      <section class="mt-5">
        <span class="p-float-label w-full">
          <p-password
            formControlName="password"
            [feedback]="false"
            [style]="{'width':'100%'}"
            [inputStyle]="{'width':'100%'}"
            [toggleMask]="true">
          </p-password>
          <label for="password">Contraseña</label>
        </span>
        @if (invalidPassword()) {
          <small class="p-error block">
            Contraseña inválida. Debe ser menor a 255 caracteres.
          </small>
        }
        @if (requiredPassword()) {
          <small class="p-error block">
            *Requerido.
          </small>
        }
      </section>

      <section class="mt-5">
        <p-button
          [style]="{'width':'100%'}"
          label="Iniciar sesión"
          [raised]="true"
          (click)="onSubmit()"
        ></p-button>
      </section>

      @if (invalidCredentials && submitted) {
        <p-messages
          [showTransitionOptions]="'500ms'"
          [hideTransitionOptions]="'500ms'"
          [(value)]="messages"
          [enableService]="false"
          [closable]="false"
        />
      }
    </form>

    <ng-template pTemplate="footer">
      <section class="flex align-items-center justify-content-center">
        <p class="text-xs">Noah, Punto de Venta &nbsp;</p>
        <img src="assets/shop.png" height="25" alt="origon">
      </section>
    </ng-template>
  </p-card>
</section>
